<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>TubExtractor</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>
  <link rel="shortcut icon" href="https://www.youtube.com/s/desktop/64b0d6dd/img/favicon.ico" type="image/x-icon"><link rel="icon" href="https://www.youtube.com/s/desktop/64b0d6dd/img/favicon_32x32.png" sizes="32x32"><link rel="icon" href="https://www.youtube.com/s/desktop/64b0d6dd/img/favicon_48x48.png" sizes="48x48"><link rel="icon" href="https://www.youtube.com/s/desktop/64b0d6dd/img/favicon_96x96.png" sizes="96x96"><link rel="icon" href="https://www.youtube.com/s/desktop/64b0d6dd/img/favicon_144x144.png" sizes="144x144">
  <!-- AOS 3.0.0-beta.6 plugin CSS (Animations) -->
  <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@100;200;300;400;500;600;700;800;900&family=DM+Sans:wght@100;200;300;400;500;600;700;800;900&subset=latin&display=swap" rel="stylesheet" id="sf-google-fonts">
  <!-- Startup CSS + Bootstrap CSS (Styles for all blocks) - Remove ".min" if you want to edit a css code -->
  <link href="https://designmodo.com/startup/app/pub/212513/989f0be4fa558f0c07fa610a2461e941/styles/css/styles.min.css?v=1687965205" rel="stylesheet" id="sf-custom-css" />
</head>

<body>
  <!-- Form 3 -->
  <section class="bg-bg-3 py-10 py-lg-20 text-center">
    <div class="container">
      <div class="row justify-content-center text-md-center">
        <div class="col-lg-10 col-xl-8">
          <h2 class="display-5 mb-6" data-aos="fade-down" data-aos-delay="0">
            TubExtractor
          </h2>
        </div>
        <div class="col-md-9 col-lg-7 col-xl-6 col-xxl-5 mb-10">
          <p class="fs-2 mb-0" data-aos="fade-down" data-aos-delay="150">
            Estrai tags e transcription da video youtube
            <span class="text-nowrap">
              all-in-one
            </span>
            website builder - no more long hours spent on the boring stuff!
          </p>
        </div>
      </div>
      <form method="post" enctype="multipart/form-data" class="js-ajax-form mb-10">
        {{ form.hidden_tag() }}
        <div class="row justify-content-center">
          <div class="col-sm-10 col-md-7 col-lg-3 mb-4 mb-lg-0" data-aos="fade-down" data-aos-delay="500">
            <div class="input-group">
              <div class="input-group-text border-end-0 border-dark-3 ps-4 pe-2"></div>
              {{ form.video_id(class="form-control border-start-0 border-dark-3 ps-1", placeholder="Inserisci l'id video", required="required") }}
            </div>
          </div>
          <div class="col-sm-10 col-md-7 col-lg-3" data-aos="fade-down" data-aos-delay="650">
            {{ form.submit(class="btn btn-action-1 w-100") }}
          </div>
        </div>
      </form>
      <div id="loader" style="display: none;">
        <p>Caricamento in corso...</p>
      </div>

	  <div id="video-info" style="display: none;">
		<h2 class="text-center mb-4">Ecco i risultati</h2>
		<div class="row">
		  <div class="col-md-6">
			<textarea id="transcription-textarea" class="form-control mb-2" rows="5"></textarea>
			<button class="btn btn-primary" id="copy-transcription-btn">Copia Trascrizione</button>
		  </div>
		  <div class="col-md-6">
			<textarea id="tags-textarea" class="form-control mb-2" rows="5"></textarea>
			<button class="btn btn-primary" id="copy-tags-btn">Copia Tags</button>
		  </div>
		</div>
	  </div>
	  
	
	</div>
	
      </div>

    </div>
  </section>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"
    data-integrity="38d870e9c3c4e532551b530706abb811"></script>

  <!-- AOS 3.0.0-beta.6 plugin JS (Animations) -->
  <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

  <!-- Startup JS (Custom js for all blocks) - Remove ".min" if you want to edit a JS code -->
  <script src="https://designmodo.com/startup/app/app-dist/js/scripts.min.js?v=5.6.692"></script>

  <!-- Custom script -->
<script>
	document.querySelector('.js-ajax-form').addEventListener('submit', function(event) {
	  event.preventDefault();
  
	  // Pulisci i risultati della ricerca precedente
	  document.querySelector('#transcription-textarea').value = '';
	  document.querySelector('#tags-textarea').value = '';
	  document.querySelector('#loader').style.display = 'block';
  
	  var videoUrl = document.querySelector('input[name="video_id"]').value;
  
	  fetch('/get_video_info', {
		  method: 'POST',
		  headers: {
			  'Content-Type': 'application/x-www-form-urlencoded'
		  },
		  body: 'video_id=' + encodeURIComponent(videoUrl)
	  })
	  .then(function(response) {
		  document.querySelector('#loader').style.display = 'none'; // Nascondi il loader dopo che la risposta è arrivata
		  return response.json();
	  })
	  .then(function(data) {
		  var transcriptionTextarea = document.querySelector('#transcription-textarea');
		  var tagsTextarea = document.querySelector('#tags-textarea');
		  transcriptionTextarea.value = data.transcript;
		  tagsTextarea.value = data.tags;
  
		  // Aggiungi i bottoni di copia
		  var copyTranscriptionBtn = document.querySelector('#copy-transcription-btn');
		  copyTranscriptionBtn.addEventListener('click', function() {
			  copyToClipboard(transcriptionTextarea.value);
		  });
  
		  var copyTagsBtn = document.querySelector('#copy-tags-btn');
		  copyTagsBtn.addEventListener('click', function() {
			  copyToClipboard(tagsTextarea.value);
		  });
  
		  // Mostra la sezione dei risultati
		  document.querySelector('#video-info').style.display = 'block';
  
		  // Pulisci il form per una nuova ricerca
		  document.querySelector('.js-ajax-form').reset();
	  })
	  .catch(function(error) {
		  console.log('Errore durante la richiesta:', error);
	  });
	});
  
	// Funzione di utilità per copiare il testo negli appunti
	function copyToClipboard(text) {
	  var textarea = document.createElement('textarea');
	  textarea.value = text;
	  document.body.appendChild(textarea);
	  textarea.select();
	  document.execCommand('copy');
	  document.body.removeChild(textarea);
	  alert('Testo copiato negli appunti!');
	}
  
	// Inizializza la libreria Clipboard.js
	var copyTranscriptionBtn = document.querySelector('#copy-transcription-btn');
	var copyTagsBtn = document.querySelector('#copy-tags-btn');
  
	new ClipboardJS(copyTranscriptionBtn);
	new ClipboardJS(copyTagsBtn);
  </script>
  
  
</body>

</html>
